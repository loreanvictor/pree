<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="/pree/">

    
    <link rel="icon" type="image/png" sizes="32x32" href="favicon.ico">

    <link rel="stylesheet" href="https://unpkg.com/nokss">
    <link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="https://esm.sh/graphis/font/graphis.css">
    <link rel="stylesheet" href="./theme.css">
    
    <script src="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/highlight.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github-dark.min.css">

    
    
    
    
    

    <script src="./.components/emo-li.js" type="module"></script>
    <script type="module" src="./.components/prev-next.js"></script>
  <title>pree: why?</title>
          
        <link rel="prefetch" href="index"><link rel="prefetch" href="install"></head>
  <body><aside aria-hidden="true">
      <use-html src="./_toc.html"><style>
  #toc {
    a:not(:hover) {
      text-decoration-color: transparent;
    }

    hr {
      margin: 0;
    }
  }

</style>

<m-d id="toc" onparse="document.querySelector('prev-next').controls?.load()"><p><a href="index">Home</a> <br><a href="motivation">Motivation</a> <br><a href="install">Installation</a></p>
<hr>
<p><a href="usage/index"><strong>Usage</strong></a> <br>‚ÄÇ <a href="usage/meta-layout">Metadata &amp; Layouts</a> <br>‚ÄÇ <a href="usage/build-only-scripts">Build-Only Scripts</a> <br>‚ÄÇ <a href="usage/config">Configuration</a></p>
<hr>
<p><a href="components/index"><strong>Using Components</strong></a> <br>‚ÄÇ <a href="components/ssr">Server Side Rendering</a> <br>‚ÄÇ <a href="components/build-env">Build Environment</a> <br>‚ÄÇ <a href="components/publish">Publishing Components</a></p>
<hr>
<p><a href="api">JavaScript API</a> <br><a href="credits">Credits</a></p>
<p><br><br></p>
<template shadowrootmode="open"><slot></slot></template></m-d>
<template shadowrootmode="open"><slot></slot></template></use-html>
    </aside>
    <main>
      <style>
  main p {
    margin-bottom: 1.5em;
  }
</style>

<m-d><h2 id="why-pree">Why <code>pree</code>?<menu role="toolbar"><button ref="?" aria-label="copy link" class="icon">üîó</button></menu></h2>
<p>TLDR:</p>
<ul>
<li>for building websites, we spend too much time wrestling with toolchains</li>
<li>we can go <em>no build</em> with modern web features (ESM, Web Components, etc.)</li>
<li>there are a few fundamental gaps though (e.g. web components render on client)</li>
<li><code>pree</code> fills these gaps as leanly as possible</li>
</ul>
<hr>
<p>A ton of modern web development is wrestling with build tools. Transpilers, bundlers, runtimes, test runners, devtools, packages with various module formats, frameworks with custom syntax and custom devtools, all need to play nice together. In the end, more time is spent configuring build tools instead of building stuff.</p>
<p>Should we keep torturing ourselves though? Modern web features such as <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules">ESM</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script/type/importmap">import maps</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components">Web Components</a>, <a href="https://developer.chrome.com/docs/css-ui/declarative-shadow-dom">declarative shadow DOM</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_nesting/Using_CSS_nesting">nested styles</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties">CSS variables</a>, etc. enable building nice smooth experiences by writing plain HTML, CSS and JavaScript, no build tools involved. Perhaps its time to adopt a <a href="https://world.hey.com/dhh/you-can-t-get-faster-than-no-build-7a44131c">"no build"</a> approach, embracing the simplicity and speed of the modern web.</p>
<hr>
<p>As great as that sounds, in practice, there are still gaps. Even for smaller projects like documentation sites or blogs, which have fewer moving parts and require less logic on the client, there are fundamental shortcomings:</p>
<template shadowrootmode="open"><slot></slot></template></m-d>

<emo-li>
  <span slot="emo">üß¨</span>
  Web components render on client. This makes user experience janky and slow. You'd need a build step to pre-render them and get good perceived speed and performance.
<template shadowrootmode="open">
  <style>
  .holder {
    display: flex;
    gap: 1rem;
    align-items: baseline;
  }

  </style>
  <div class="holder">
    <span><slot name="emo"></slot></span>
    <div><slot></slot></div>
  </div>
</template></emo-li>
<br>
<emo-li>
  <span slot="emo">üèóÔ∏è</span>
  Websites typically have multiple pages, sharing layout and tons of metadata, differing in a few. Without a build step, managing these shared and differing parts would be a headache.
<template shadowrootmode="open">
  <style>
  .holder {
    display: flex;
    gap: 1rem;
    align-items: baseline;
  }

  </style>
  <div class="holder">
    <span><slot name="emo"></slot></span>
    <div><slot></slot></div>
  </div>
</template></emo-li>
<br>
<emo-li>
  <span slot="emo">üëª</span>
  Many components are static: they don't do anything on the client. Removing their code, you wouldn't just be cutting down on downloaded assets, but also on unnecessary work the client has to do. But then again, that wouldn't be possible without a build step.
<template shadowrootmode="open">
  <style>
  .holder {
    display: flex;
    gap: 1rem;
    align-items: baseline;
  }

  </style>
  <div class="holder">
    <span><slot name="emo"></slot></span>
    <div><slot></slot></div>
  </div>
</template></emo-li>

<m-d><hr>
<p><code>pree</code> aims to fill in these gaps as leanly as it can. It is designed for building static sites such as blogs or documentations. The goal is to provide a simple, straightforward and smooth developer experience, while being as "no build" as possible.</p>
<ul>
<li>It <a href="usage/index">prebuilds HTML files</a>, pre-rendering all web components using <a href="https://developer.chrome.com/docs/css-ui/declarative-shadow-dom">declarative shadow DOM</a>.</li>
<li>It <a href="usage/meta-layout">handles metadata and layout</a> with front matter.</li>
<li>It <a href="usage/build-only-scripts">handles build-only components and scripts</a>, by simply removing <code>&lt;script build-only&gt;</code> tags.</li>
</ul>
<p>Except for the front matter, with <code>pree</code> you will be writing HTML, CSS and JavaScript that browsers could simply load. <code>pree</code> just makes stuff faster by pre-running some scripts and removing some others, resulting in an almost no-build developer experience that also rocks top-tier performance.</p>
<hr>
<style>
h5 {
  &:not(:first-of-type) {
    margin-top: 3rem;
  }
  margin-bottom: 0rem;
}

h5 + p {
  margin-top: 0.5rem;
}
</style>

<h5 id="q-isnt-this-just-another-build-tool">Q: Isn't this just another build tool?<menu role="toolbar"><button ref="?" aria-label="copy link" class="icon">üîó</button></menu></h5>
<p><strong>A</strong>: It is, but a really thin and invisible one. With the exception of layouting, using and not using <code>pree</code> gets you basically the same website. <code>pree</code> just speeds the website up by pre-rendering it.</p>
<h5 id="q-what-if-i-want-to-write-markdown">Q: What if I want to write Markdown?<menu role="toolbar"><button ref="?" aria-label="copy link" class="icon">üîó</button></menu></h5>
<p><strong>A</strong>: You can. Just use a web components like <a href="https://zerodevx.github.io/zero-md/">zero-md</a>. Load it <code>build-only</code> so that your users get prebuilt HTML and dont have to download a markdown parser.</p>
<pre><code class="language-html hljs language-xml" data-highlighted="yes"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">build-only</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://esm.sh/zero-md"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">zero-md</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"my-markdown.md"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">zero-md</span>&gt;</span>
</code><menu role="toolbar" align="right"><button ref="?" class="icon" aria-label="copy">üìë</button></menu></pre>
<p>In fact, <a href="https://github.com/loreanvictor/pree/blob/main/docs/motivation.html">these docs are written</a> in markdown (with a <a href="https://github.com/loreanvictor/pree/blob/main/docs/components/m-d.js">custom component</a>) and built with <code>pree</code>:</p>
<pre><code class="language-md hljs language-markdown" data-highlighted="yes"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">m-d</span>&gt;</span></span>
<span class="hljs-section">## Why `pree`?</span>

TLDR:

<span class="hljs-bullet">-</span> for building websites, we spend too much time wrestling with toolchains
<span class="hljs-bullet">-</span> we can go <span class="hljs-emphasis">_no build_</span> with modern web features (ESM, Web Components, etc.)
...
<span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">m-d</span>&gt;</span></span>
</code><menu role="toolbar" align="right"><button ref="?" class="icon" aria-label="copy">üìë</button></menu></pre>
<h5 id="q-what-if-i-want-to-split-html-files-into-parts">Q: What if I want to split HTML files into parts?<menu role="toolbar"><button ref="?" aria-label="copy link" class="icon">üîó</button></menu></h5>
<p><strong>A</strong>: Web components can do that too. Web components are pretty powerful, becoming more powerful with <code>pree</code> as they can do magical stuff on build time without affecting client-side performance and user experience.</p>
<p>For example, this is how splitting is handled in these docs:</p>
<pre><code class="language-html hljs language-xml" data-highlighted="yes"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">build-only</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./components/use-html.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-comment">&lt;!-- üëá this is the code for the side menu --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">aside</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">use-html</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./_toc.html"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">use-html</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span>
</code><menu role="toolbar" align="right"><button ref="?" class="icon" aria-label="copy">üìë</button></menu></pre>
<h5 id="q-what-sort-of-websites-can-be-built-with-pree">Q: What sort of websites can be built with <code>pree</code>?<menu role="toolbar"><button ref="?" aria-label="copy link" class="icon">üîó</button></menu></h5>
<p><strong>A</strong>: Static websites, like blogs, documentations, landing pages, etc. For dynamic pages (e.g. e-commerce), use another tool. Note that <em>static</em> doesn't mean <em>non-interactive</em>, just that you have fixed pages.</p>
<h5 id="q-what-kind-of-components-work-with-pree">Q: What kind of components work with <code>pree</code>?<menu role="toolbar"><button ref="?" aria-label="copy link" class="icon">üîó</button></menu></h5>
<p><strong>A</strong>: ALL web components work with <code>pree</code>. Static ones that are loaded <em>build-only</em> will be faster, as will interactive ones supporting SSR through <a href="https://developer.chrome.com/docs/css-ui/declarative-shadow-dom">declarative shadow DOM</a>.</p>
<h5 id="q-writing-web-components-is-hard-though-right">Q: Writing web components is hard though, right?<menu role="toolbar"><button ref="?" aria-label="copy link" class="icon">üîó</button></menu></h5>
<p><strong>A</strong>: With proper tools, its a breeze. I use <a href="https://github.com/loreanvictor/minicomp">minicomp</a>, and combine it with <a href="https://github.com/loreanvictor/rehtm">rehtm</a> for more interactive components. They support SSR and are quite simple.</p>
<pre><code class="language-js hljs language-javascript" data-highlighted="yes"><span class="hljs-keyword">import</span> { define, currentNode } <span class="hljs-keyword">from</span> <span class="hljs-string">'https://esm.sh/minicomp'</span>

<span class="hljs-title function_">define</span>(<span class="hljs-string">'use-html'</span>, <span class="hljs-function">(<span class="hljs-params">{ src }</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> host = <span class="hljs-title function_">currentNode</span>()

  <span class="hljs-title function_">fetch</span>(src)
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">text</span>())
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">html</span> =&gt;</span> {
      host.<span class="hljs-property">innerHTML</span> = html
    })

  <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;slot&gt;&lt;/slot&gt;'</span>
})
</code><menu role="toolbar" align="right"><button ref="?" class="icon" aria-label="copy">üìë</button></menu></pre>
<h5 id="q-can-you-really-build-cool-stuff-without-a-build-tool">Q: Can you really build cool stuff without a build tool?<menu role="toolbar"><button ref="?" aria-label="copy link" class="icon">üîó</button></menu></h5>
<p><strong>A</strong>: Judge for yourself. These docs are built with <code>pree</code> and no other tooling: check the <a href="https://github.com/loreanvictor/pree/tree/main/docs">source code</a>.</p>
<h5 id="q-whats-with-the-front-matter-why-not-pure-html">Q: Whats with the front matter? Why not pure HTML?<menu role="toolbar"><button ref="?" aria-label="copy link" class="icon">üîó</button></menu></h5>
<p><strong>A</strong>: I'm salty about this, but I couldn't come close to the developer experience of layouting with front matter using web components. As powerful as they are, they are about <em>isolation</em>, which isn't what you want with layouting.</p>
<br><template shadowrootmode="open"><slot></slot></template></m-d>

<change-history><template shadowrootmode="open"><style>a {
        display: block;
        text-align: right;
        opacity:.35;
        font-size: 0.8rem;
        font-style: italic;
        text-decoration: none;
        color: inherit;
      }</style><a ref="?" target="_blank" href="https://github.com/loreanvictor/pree/commit/0069d5ede3f090e9c885d2a7614b4aa5df641dbf">Updated at <span ref="?">Feb 04, 2024</span> <br>for <span ref="?">pree</span> version <span ref="?">0.1.9</span></a></template></change-history>

<br>

      <prev-next><template shadowrootmode="open"><link rel="stylesheet" href="https://unpkg.com/nokss"><link rel="stylesheet" href="https://unpkg.com/graphis/font/graphis.css"><style>i {
      font-family: 'graphis', sans-serif;
      font-style: normal;
      font-size: 2rem;
      opacity: .25;
    }

    section[role="feed"] {
      flex-direction: row;
      &[aria-hidden] {
        opacity: 0;
      }

      opacity: 1;
      transition: opacity .5s;

      article {
        flex-grow: 1;
        display: flex;
        flex-direction: row;
        align-items: center;
        gap: 1rem;

        & > a {
          display: block;
          flex-grow: 1;
          text-decoration: none!important;
        }

        &.next {
          flex-basis: flex-end;
          text-align: right;
        }

        @media (max-width: 480px) {
          &:first-child:not(:last-child) {
            display: none;
          }
        }
      }

      margin-bottom: 4rem;
    }</style><section role="feed" ref="?">        
        
          <article>
            <i>‚¨Ö</i>
            <a href="index">
              <small>Previosly</small><br>
              Home
            </a>
          </article>
          
        
          <article class="next">
            <a href="install">
              <small>Up Next</small><br>
              Installation
            </a>
            <i>‚û°</i>
          </article>
          
      </section></template></prev-next>
    </main>
    <footer>
      <use-html src="./_footer.html"><script type="module" src="./.components/menu-toggle.js"></script>



<div style="display: flex" class="local-style-nfrezqvazq"><style>.local-style-nfrezqvazq { 
 
    b {
      opacity: .35;
      font-weight: normal;
      display: inline-block;
      transform: scaleY(2);
      margin: 0 .35rem;
    }
   
 }</style>
  

  <menu-toggle><template shadowrootmode="open"><link rel="stylesheet" href="https://unpkg.com/nokss"><link rel="stylesheet" href="https://unpkg.com/graphis/font/graphis.css"><style>.icon {
      font-family: 'graphis', sans-serif;
      font-style: normal;
      font-size: 1.2rem;
    }

    button[role="switch"][aria-checked="true"]>span{
      color: var(--background-color);
    }</style><button ref="?" role="switch" aria-label="toggle sidebar" aria-checked="true"><span class="icon">‚ùå</span><span class="icon">‚©ß</span></button></template></menu-toggle>
  <div style="flex-grow: 1"></div>
  <div align="right">
    <small-device>
      <gh-link no-label="">pree<template shadowrootmode="open"><link rel="stylesheet" href="https://unpkg.com/nokss/dist/bundles/md.css"><style>octo-icon { opacity: .45; transition: opacity .15s; }
      a:not([role]) {
        filter: none;
        color: var(--text-color);
        &:hover octo-icon { opacity: 1; }
      }</style><a ref="?" target="_blank" href="https://github.com/loreanvictor/pree"><octo-icon style=""><template shadowrootmode="open">
  <style>
    svg {
      width: 1.2rem;
      vertical-align: -.65rem;
      margin-right: .15rem;
    }
  </style>
  <svg width="32" height="32" viewBox="0 0 98 96" xmlns="http://www.w3.org/2000/svg"> <path fill-rule="evenodd" clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z" fill="currentColor"></path> </svg>
</template></octo-icon><slot ref="?" style="display: none">GitHub</slot></a></template></gh-link>  
      <npm-badge no-label="">pree<template shadowrootmode="open"><link rel="stylesheet" href="https://unpkg.com/nokss/dist/bundles/md.css"><style>a:not([role]) {
        filter: none;
        color: var(--text-color);
      }
      img {
        vertical-align: middle;
        margin-left: 0.5rem;
      }</style><a ref="?" target="_blank" href="https://www.npmjs.com/package/pree"><slot ref="?" style="display: none">NPM</slot><img alt="npm" ref="?" src="https://img.shields.io/npm/v/pree.svg?label=&amp;style=normal"></a></template></npm-badge>
    <template shadowrootmode="open">
  <style>
    @media (min-width: 768px) {
      :host {
        display: none;
      }
    }
  </style>
  <slot></slot>
</template></small-device>
    <large-device>
      <gh-link>github<template shadowrootmode="open"><link rel="stylesheet" href="https://unpkg.com/nokss/dist/bundles/md.css"><style>octo-icon { opacity: .45; transition: opacity .15s; }
      a:not([role]) {
        filter: none;
        color: var(--text-color);
        &:hover octo-icon { opacity: 1; }
      }</style><a ref="?" target="_blank" href="https://github.com/loreanvictor/pree"><octo-icon style=""><template shadowrootmode="open">
  <style>
    svg {
      width: 1.2rem;
      vertical-align: -.65rem;
      margin-right: .15rem;
    }
  </style>
  <svg width="32" height="32" viewBox="0 0 98 96" xmlns="http://www.w3.org/2000/svg"> <path fill-rule="evenodd" clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z" fill="currentColor"></path> </svg>
</template></octo-icon><slot ref="?" style="">GitHub</slot></a></template></gh-link>
      <b>|</b>
      <npm-badge design="flat-square">npm<template shadowrootmode="open"><link rel="stylesheet" href="https://unpkg.com/nokss/dist/bundles/md.css"><style>a:not([role]) {
        filter: none;
        color: var(--text-color);
      }
      img {
        vertical-align: middle;
        margin-left: 0.5rem;
      }</style><a ref="?" target="_blank" href="https://www.npmjs.com/package/pree"><slot ref="?" style="">NPM</slot><img alt="npm" ref="?" src="https://img.shields.io/npm/v/pree.svg?label=&amp;style=flat-square"></a></template></npm-badge>
    <template shadowrootmode="open">
  <style>
    @media (max-width: 767px) {
      :host {
        display: none;
      }
    }
  </style>
  <slot></slot>
</template></large-device>
  </div>
</div><template shadowrootmode="open"><slot></slot></template></use-html>
    </footer>
    
    <script type="module" src="copy.js"></script>
  

</body></html>