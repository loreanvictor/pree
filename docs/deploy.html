---
title: "pree: deploy"
layout: ./_layout.html
---

<m-d>

## Deploying Your Website

`pree` simplifies website deployment by generating static files, eliminating the need for specific server setups (thats the benefit of going no-build in general). This allows for deployment on any platform that supports static file hosting. For efficiency, it's practical to include the build step within your deployment process. Below are guides for integrating `pree` with several common static hosting platforms.

<emo-li>
  <span slot="emo">üöÄ</span>
  <m-d>[GitHub Pages](deploy#github-pages)</m-d>
</emo-li>
<emo-li>
  <span slot="emo">üêô</span>
  <m-d>[Surge](deploy#surge)</m-d>
</emo-li>
<emo-li>
  <span slot="emo" style="font-size: 1.2rem">‚ñ≤</span>
  <m-d>[Vercel](deploy#vercel)</m-d>
</emo-li>

---

### GitHub Pages

[GitHub Pages](https://pages.github.com/) is one of the easiest methods of deploying a static website, specifically for personal or open-source projects. Use it with [GitHub Actions](https://github.com/features/actions) to automatically prebuild and deploy your website upon commits.

<emo-li>
  <span slot="emo">üìú</span>
  <m-d>**STEP 1**: Add a `.github/workflows/docs.yml` file to your project.</m-d>
</emo-li>

<emo-li>
 <span slot="emo">‚öôÔ∏è</span>
  <m-d>**STEP 2**: Fill the workflow file as follows:</m-d>
</emo-li>

```yml
  name: docs
  on:
    push:
      branches:
        - main
  permissions:
    contents: write
  jobs:
    run:
      runs-on: ubuntu-latest
      steps:
        - name: Checkout
          uses: actions/checkout@v2
          with:
            fetch-depth: 0

        - uses: actions/setup-node@v2
          with:
            node-version: '16'

        - name: Install pree
          run: npm i -g pree

        - name: Build docs
          run: pree build

        - name: No Jekyll
          run: touch docs/.nojekyll
        
        - name: Deploy üöÄ
          uses: JamesIves/github-pages-deploy-action@v4
          with:
            folder: site
```


<emo-li>
  <span slot="emo">üöÄ</span>
  <m-d>**STEP 3**: Commit and push the workflow file to your repository.</m-d>
</emo-li>

> You must have Github Pages configured on your repository. [Check this guide](https://docs.github.com/en/pages/getting-started-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site) on how to do it.

<blockquote>
  <emo-li>
  <span slot="emo">‚ú®</span>
  <m-d>This website is hosted on GitHub Pages using [a similar workflow](https://github.com/loreanvictor/pree/blob/main/.github/workflows/docs.yml).
  </m-d>
  </emo-li>
</blockquote>

---

### Surge

[Surge](https://surge.sh/) is another easy method of deploying a static website.


<emo-li>
  <span slot="emo">üèóÔ∏è</span>
  <m-d>**STEP 1**: build with `pree`:</m-d>
</emo-li>

```bash
pree build docs site
```

<emo-li>
  <span slot="emo">üëâ</span>
  <m-d>**STEP 2**: go to the built directory:</m-d>
</emo-li>

```bash
cd site
```

<emo-li>
  <span slot="emo">üöÄ</span>
  <m-d>**STEP 3**: deploy with surge</m-d>
</emo-li>

```bash
surge --domain https://my-website.surge.sh
```

<br>

> Surge ignores .\* and _\* files by default (among other files and paths). Add a [`.surgeignore`](https://surge.sh/help/ignoring-files-and-directories) file to your project to customize this behavior.

<blockquote>
  <emo-li>
  <span slot="emo">‚ú®</span>
  <m-d>This website is also [deployed to Surge using this method](https://github.com/loreanvictor/pree/blob/d6c44c9a349dde326654ac9e77a7a7ad7d1c1f75/package.json#L20) ([https://pree.surge.sh](https://pree.surge.sh)).
  </m-d>
  </emo-li>
</blockquote>

---

### Vercel

`pree` uses [Puppeteer](https://pptr.dev/) to generate the static files. Vercel has a [known issue](https://pptr.dev/troubleshooting#running-puppeteer-on-aws-lambda) with Puppeteer (as well as all AWS powered build pipelines), so you need to prebuild the site in another environment, for example your own machine, before deploying it to Vercel.


Configure your project to build with `pree`. Either go the your Vercel dashboard project setting and set the build configuration similar to the following:

<img src=".images/vercel-config.png" alt="vercel config screenshot" width="100%"/>

<br>

Or, in your Vercel config files, add a config like this:

```json
  {
    "installCommand": "npm i -g pree@latest",
    "buildCommand": "pree build",
    "outputDirectory": "site"
  }
```

<br>

<emo-li>
  <span slot="emo">üëÄ</span>
  Execute the following to deploy a preview:
</emo-li>

```bash
vercel build
```
```bash
vercel deploy --prebuilt
```

<br>

<emo-li>
  <span slot="emo">üöÄ</span>
  <m-d>Execute the following to deploy to production:</m-d>
</emo-li>

```bash
vercel build --prod
```
```bash
vercel deploy --prebuilt --prod
```

<br>

<blockquote>
  <emo-li>
  <span slot="emo">‚ú®</span>
  <m-d>This website is also [deployed to Vercel using this method](https://github.com/loreanvictor/pree/blob/d6c44c9a349dde326654ac9e77a7a7ad7d1c1f75/package.json#L19) ([https://pree-view.vercel.app](https://pree-view.vercel.app)).
  </m-d>
  </emo-li>
</blockquote>

</m-d>

<br>
<change-history></change-history>
<br>