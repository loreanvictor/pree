<!DOCTYPE html><html lang="en"><head><style type="text/css">.turbo-progress-bar {
  position: fixed;
  display: block;
  top: 0;
  left: 0;
  height: 3px;
  background: #0076ff;
  z-index: 2147483647;
  transition:
    width 300ms ease-out,
    opacity 150ms 150ms ease-in;
  transform: translate3d(0, 0, 0);
}
</style><base href="/pree/">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    

    
    <link rel="icon" type="image/png" sizes="32x32" href="favicon.ico">

    <style>
      @import 'https://unpkg.com/nokss' layer(base);
    </style>
    <link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="https://esm.sh/graphis/font/graphis.css">
    <link rel="stylesheet" href="./assets/styles/theme.css">
    
    <script src="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/highlight.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github-dark.min.css">

    
    
    
    
    

    <script src="./assets/components/emo-li.js" type="module"></script>
    <script type="module" src="./assets/components/prev-next.js"></script>

    <script type="module">
      import 'https://unpkg.com/@hotwired/turbo@8.0.4/dist/turbo.es2017-esm.js';
    </script>
  <title>pree: publishing components</title>
          
        <link rel="prefetch" href="components/build-env.html"><link rel="prefetch" href="deploy.html"></head>
  <body><slot name="background"></slot>
    <aside aria-hidden="true">
      <turbo-frame id="side-bar" target="main" data-turbo-action="advance">
        <use-html src="./_toc.html"><base href="/pree/"><style>
  #toc {
    a:not(:hover) {
      text-decoration-color: transparent;
    }

    hr {
      margin: 0;
    }
  }

</style>

<m-d id="toc" onparse="document.querySelector('prev-next').controls?.load()"><p><a href="index.html">Home</a> <br><a href="motivation.html">Motivation</a> <br><a href="install.html">Installation</a></p>
<hr>
<p><a href="usage/index.html"><strong>Usage</strong></a> <br>  <a href="usage/meta-layout.html">Metadata &amp; Layouts</a> <br>  <a href="usage/build-only-scripts.html">Build-Only Scripts</a> <br>  <a href="usage/config.html">Configuration</a></p>
<hr>
<p><a href="components/index.html"><strong>Using Components</strong></a> <br>  <a href="components/ssr.html">Server Side Rendering</a> <br>  <a href="components/build-env.html">Build Environment</a> <br>  <a href="components/publish.html">Publishing Components</a></p>
<hr>
<p><a href="deploy.html">Deploy</a> <br><a href="api.html">JavaScript API</a> <br><a href="credits.html">Credits</a></p>
<p><br><br></p>
<template shadowrootmode="open"><slot></slot></template></m-d>

<template shadowrootmode="open"><slot></slot></template></use-html>
      </turbo-frame>
    </aside>
    <main>
      <turbo-frame id="main" data-turbo-action="advance">
        <m-d><h2 id="publishing-components">Publishing Components<menu role="toolbar"><button ref="?" aria-label="copy link" class="icon">🔗</button></menu></h2>
<p>You can easily share your components by publishing them through <a href="https://npmjs.com">NPM</a>, where they can get used via CDNs such as <a href="https://unpkg.com">unpkg</a> or <a href="https://esm.sh">esm.sh</a>. In this page we discuss a few good practices for publishing web components that integrate with <code>pree</code>. Checkout <a href="https://github.com/webcomponents/gold-standard/wiki">this checklist</a> and <a href="https://open-wc.org/guides/publishing/">these guides</a> some recommendations for publishing web components in general.</p>
<hr>
<h3 id="ssr-support">SSR Support<menu role="toolbar"><button ref="?" aria-label="copy link" class="icon">🔗</button></menu></h3>
<p>👉 If your component is interactive, make sure it supports <a href="components/ssr">SSR</a>. This will make your website interactive faster on the client, as the pre-rendered DOM won't be recreated and is just hydrated. Use libraries such as <a href="https://github.com/loreanvictor/minicomp">minicomp</a> and <a href="https://github.com/loreanvictor/rehtm">rehtm</a> to make your components easily SSR-friendly.</p>
<pre><code class="language-js hljs language-javascript" data-highlighted="yes"><span class="hljs-keyword">import</span> { define } <span class="hljs-keyword">from</span> <span class="hljs-string">'https://esm.sh/minicomp'</span>
<span class="hljs-keyword">import</span> { ref, template } <span class="hljs-keyword">from</span> <span class="hljs-string">'https://esm.sh/rehtm'</span>

<span class="hljs-title function_">define</span>(<span class="hljs-string">'a-button'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> span = <span class="hljs-title function_">ref</span>()
  <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>
  
  <span class="hljs-keyword">return</span> template<span class="hljs-string">`
    &lt;button onclick=<span class="hljs-subst">${() =&gt; span.current.textContent = ++count}</span>&gt;
      Clicked &lt;span ref=<span class="hljs-subst">${span}</span> role="status"&gt;0&lt;/span&gt; times
    &lt;/button&gt;
  `</span>
})
</code><menu role="toolbar" align="right"><button ref="?" class="icon" aria-label="copy">📑</button></menu></pre>
<hr>
<h3 id="using-build-environment">Using Build Environment<menu role="toolbar"><button ref="?" aria-label="copy link" class="icon">🔗</button></menu></h3>
<p>👉 If your component accesses <a href="components/build-env">build environment</a>, check for availability and version of the APIs
so that your component doesn't cause errors if used in other environments:</p>
<pre><code class="language-js hljs language-javascript" data-highlighted="yes"><span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">BUILD_ENV_API</span>) {
  <span class="hljs-comment">// use the APIs</span>
}
</code><menu role="toolbar" align="right"><button ref="?" class="icon" aria-label="copy">📑</button></menu></pre>
<br>

<p>👉 Base URL for the APIs might change in some environments. Use <code>BUILD_ENV_API.baseURL</code> instead of <code>/@env/</code>:</p>
<pre><code class="language-js hljs language-javascript" data-highlighted="yes"><span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`<span class="hljs-subst">${BUILD_ENV_API.baseURL}</span>git/remote/info`</span>)
</code><menu role="toolbar" align="right"><button ref="?" class="icon" aria-label="copy">📑</button></menu></pre>
<br>

<p>It is recommended to also check the version of <code>pree</code> to ensure the APIs you need are provided. Use <code>BUILD_ENV_API.provider</code> to check that information:</p>
<pre><code class="language-js hljs language-javascript" data-highlighted="yes"><span class="hljs-variable language_">window</span>.<span class="hljs-property">BUILD_ENV_API</span>.<span class="hljs-property">provider</span>
<span class="hljs-comment">// pree@0.1.13</span>
</code><menu role="toolbar" align="right"><button ref="?" class="icon" aria-label="copy">📑</button></menu></pre>
<pre><code class="language-js hljs language-javascript" data-highlighted="yes"><span class="hljs-keyword">import</span> { satisfies } <span class="hljs-keyword">from</span> <span class="hljs-string">'https://esm.sh/semver'</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">buildEnvAccess</span> = supportedVersions =&gt; {
  <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">window</span>.<span class="hljs-property">BUILD_ENV_API</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>

  <span class="hljs-keyword">const</span> [host, version] = <span class="hljs-variable language_">window</span>.<span class="hljs-property">BUILD_ENV_API</span>.<span class="hljs-property">provider</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">'@'</span>)
  <span class="hljs-keyword">if</span> (host === <span class="hljs-string">'pree'</span> &amp;&amp; <span class="hljs-title function_">satisfies</span>(version, supportedVersions)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }
}

<span class="hljs-keyword">if</span> (<span class="hljs-title function_">buildEnvAccess</span>(<span class="hljs-string">'^0.1.10'</span>)) {
  <span class="hljs-comment">// use the APIs</span>
}
</code><menu role="toolbar" align="right"><button ref="?" class="icon" aria-label="copy">📑</button></menu></pre>
<br>

<blockquote>
<p>It is highly recommended to ensure that your components can function properly
even if access to build environment is not available. If not, users might get confused about when and where
they can use your components.</p>
</blockquote>
<template shadowrootmode="open"><slot></slot></template></m-d>

<br>
<change-history><template shadowrootmode="open"><style>div {
        display: flex;
        flex-direction: row-reverse;
        gap: 1rem;

        --bg: var(--background-color, #fff);
        --fg: var(--text-color, #000);
        --r: var(--roundness, 3px);
        
        background: linear-gradient(to left, color-mix(in srgb, var(--bg) 97%, var(--fg)), transparent);
        padding: 0.5rem;
        border-radius: calc(var(--r) + .25rem);
        color: color-mix(in srgb, var(--bg) 70%, var(--fg));

        a {
          display: block;
          text-align: right;
          font-size: 0.8rem;
          font-style: italic;
          text-decoration: none;
          color: inherit;

          &.code {
            font-style: normal;
            font-weight: bold;
            font-family: monospace;
            background: color-mix(in srgb, var(--bg) 85%, var(--fg));
            font-size: 1.5rem;
            width: 2rem;
            height: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--r);
            transition: color .15s, background .15s;

            &:hover {
              color: var(--bg);
              background: color-mix(in srgb, var(--bg) 15%, var(--fg));
            }
          }
        }
      }</style><div><a ref="?" target="_blank" class="code" aria-label="edit" href="https://github.com/loreanvictor/pree/blob/main/docs/components/publish.html">✎</a><a ref="?" target="_blank" href="https://github.com/loreanvictor/pree/commit/f1bde2096973806bae13525ce558c1a08bac9adf">Updated at <span ref="?">Feb 07, 2024</span> <br>for <span ref="?">pree</span> version <span ref="?">0.1.13</span></a></div></template></change-history>
<br>
        <prev-next><template shadowrootmode="open"><link rel="stylesheet" href="https://unpkg.com/nokss"><link rel="stylesheet" href="https://unpkg.com/graphis/font/graphis.css"><style>i {
      font-family: 'graphis', sans-serif;
      font-style: normal;
      font-size: 2rem;
      opacity: .25;
    }

    section[role="feed"] {
      flex-direction: row;
      &[aria-hidden] {
        opacity: 0;
      }

      opacity: 1;
      transition: opacity .5s;

      article {
        flex-grow: 1;
        display: flex;
        flex-direction: row;
        align-items: center;
        gap: 1rem;

        & > a {
          display: block;
          flex-grow: 1;
          text-decoration: none!important;
        }

        &.next {
          flex-basis: flex-end;
          text-align: right;
        }

        @media (max-width: 480px) {
          &:first-child:not(:last-child) {
            display: none;
          }
        }
      }

      margin-bottom: 4rem;
    }</style><section role="feed" ref="?">        
        
          <article>
            <i>⬅</i>
            <a href="components/build-env.html">
              <small>Previosly</small><br>
              Build Environment
            </a>
          </article>
          
        
          <article class="next">
            <a href="deploy.html">
              <small>Up Next</small><br>
              Deploy
            </a>
            <i>➡</i>
          </article>
          
      </section></template></prev-next>
        <slot name="watermark">
          <use-html src="./_watermark.html"><base href="/pree/"><picture class="local-style-ymagc0hkatb" data-local-style="local-style-ymagc0hkatb"><style>.local-style-ymagc0hkatb[data-local-style=local-style-ymagc0hkatb] { 
 
    img {
      display: block;
      margin: 0 auto;
      width: 128px;
    }
   
 }</style>
  
  <source srcset="./assets/images/watermark-dark.svg" media="(prefers-color-scheme: dark)">
  <img width="192px" src="./assets/images/watermark-light.svg" alt="pree logo">
</picture>
<br><br><template shadowrootmode="open"><slot></slot></template></use-html>
        </slot>
      </turbo-frame>
    </main>

    <footer>
      <turbo-frame id="footer" target="main" data-turbo-action="advance">
        <use-html src="./_footer.html"><base href="/pree/"><script type="module" src="./assets/components/menu-toggle.js"></script>


<script type="module" src="./assets/components/finde-btn.js"></script>

<div style="display: flex" class="local-style-wat4tzkamff" data-local-style="local-style-wat4tzkamff"><style>.local-style-wat4tzkamff[data-local-style=local-style-wat4tzkamff] { 
 
    b {
      opacity: .35;
      font-weight: normal;
      display: inline-block;
      transform: scaleY(2);
      margin: 0 .35rem;
    }
   
 }</style>
  

  <div style="display: flex; gap: var(--spacing)">
    <menu-toggle><template shadowrootmode="open"><link rel="stylesheet" href="https://unpkg.com/nokss"><link rel="stylesheet" href="https://unpkg.com/graphis/font/graphis.css"><style>.icon {
      font-family: 'graphis', sans-serif;
      font-style: normal;
      font-size: 1.2rem;
    }

    button[role="switch"][aria-checked="true"]>span{
      color: var(--background-color);
    }</style><button ref="?" role="switch" aria-label="toggle sidebar" aria-checked="true"><span class="icon">❌</span><span class="icon">⩧</span></button></template></menu-toggle>
    <finde-btn><template shadowrootmode="open"><style>@import 'https://unpkg.com/nokss' layer(base);
      @import 'https://unpkg.com/graphis/font/graphis.css';

      [aria-label] {
        font-family: 'graphis', sans-serif;
        font-style: normal;
        font-size: 1.2em;
      }

      dialog {
        @media(min-width: 512px) {
          --modal-width: calc(var(--main-content-max-width, 60vw) * .75);
        }

        border-radius: calc(var(--roundness) * 2);
        --border-color: color-mix(
          in srgb,
          var(--text-color) calc(var(--hr-expression) * 50%),
          var(--background-color)
        );

        position: fixed;
        top: 20vh;
        margin: 0 auto;

        input {
          background: none;
          border: none;
          font-size: 1.5rem;
        }

        div {
          max-height: calc(60vh - 2rem - calc(var(--spacing) * 4) - var(--button-height));
          overflow: auto;

          nav {
            a {
              padding: var(--spacing);
              display: flex;
              min-height: 4rem;
              align-items: center;
              transition: background .1s ease;

              &:focus, &:hover {
                background: color-mix(in srgb, var(--background-color) 90%, var(--primary-color));
                border-radius: var(--roundness);
                outline: none;
              }

              &>div {
                flex-grow: 1;
              }

              small {
                opacity: .5;
                display: block;

                &:empty, &:has(:empty) {
                  display: none;
                }
              }

              &:not(:last-child) {
                border-bottom: 1px solid var(--border-color);
              }

              kbd {
                float: right;
                opacity: 0;

                transition: opacity .1s ease;

                :focus>& {
                  opacity: 1;
                }
              }
            }
          }
        }

        kbd {
          height: 1.5rem;
        }

        form {
          display: none;
        }

        @media (any-hover: none) {
          form {
            display: block;
          }

          footer small, kbd {
            display: none;
          }
        }
      }</style><menu role="toolbar"><button aria-label="search">🔍</button></menu><dialog ref="?"><input ref="?" type="text" placeholder="Type to search ..."><div ref="?"></div><footer align="right"><small><kbd>↑</kbd><kbd>↓</kbd> to navigate,<kbd>ESC</kbd> to close</small><form method="dialog"><button>Close</button></form></footer></dialog></template></finde-btn>
  </div>
  <div style="flex-grow: 1"></div>
  <div align="right">
    <small-device>
      <gh-link no-label="">pree<template shadowrootmode="open"><link rel="stylesheet" href="https://unpkg.com/nokss/dist/bundles/md.css"><style>octo-icon { opacity: .45; transition: opacity .15s; }
      a:not([role]) {
        filter: none;
        color: var(--text-color);
        &:hover octo-icon { opacity: 1; }
      }</style><a ref="?" target="_blank" href="https://github.com/loreanvictor/pree"><octo-icon style=""><template shadowrootmode="open">
  <style>
    svg {
      width: 1.2rem;
      vertical-align: -.65rem;
      margin-right: .15rem;
    }
  </style>
  <svg width="32" height="32" viewBox="0 0 98 96" xmlns="http://www.w3.org/2000/svg"> <path fill-rule="evenodd" clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z" fill="currentColor"></path> </svg>
</template></octo-icon><slot ref="?" style="display: none">GitHub</slot></a></template></gh-link>  
      <npm-badge no-label="">pree<template shadowrootmode="open"><style>@import 'https://unpkg.com/nokss/dist/bundles/md.css' layer(base);

      a {
        filter: none;
        color: var(--text-color);
      }
      img {
        vertical-align: middle;
        margin-left: 0.5rem;
      }</style><a ref="?" target="_blank" href="https://www.npmjs.com/package/pree"><slot ref="?" style="display: none">NPM</slot><img alt="npm" ref="?" src="https://img.shields.io/npm/v/pree.svg?label=&amp;style=normal"></a></template></npm-badge>
    <template shadowrootmode="open">
  <style>
    @media (min-width: 768px) {
      :host {
        display: none;
      }
    }
  </style>
  <slot></slot>
</template></small-device>
    <large-device>
      <gh-link>github<template shadowrootmode="open"><link rel="stylesheet" href="https://unpkg.com/nokss/dist/bundles/md.css"><style>octo-icon { opacity: .45; transition: opacity .15s; }
      a:not([role]) {
        filter: none;
        color: var(--text-color);
        &:hover octo-icon { opacity: 1; }
      }</style><a ref="?" target="_blank" href="https://github.com/loreanvictor/pree"><octo-icon style=""><template shadowrootmode="open">
  <style>
    svg {
      width: 1.2rem;
      vertical-align: -.65rem;
      margin-right: .15rem;
    }
  </style>
  <svg width="32" height="32" viewBox="0 0 98 96" xmlns="http://www.w3.org/2000/svg"> <path fill-rule="evenodd" clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z" fill="currentColor"></path> </svg>
</template></octo-icon><slot ref="?" style="">GitHub</slot></a></template></gh-link>
      <b>|</b>
      <npm-badge design="flat-square">npm<template shadowrootmode="open"><style>@import 'https://unpkg.com/nokss/dist/bundles/md.css' layer(base);

      a {
        filter: none;
        color: var(--text-color);
      }
      img {
        vertical-align: middle;
        margin-left: 0.5rem;
      }</style><a ref="?" target="_blank" href="https://www.npmjs.com/package/pree"><slot ref="?" style="">NPM</slot><img alt="npm" ref="?" src="https://img.shields.io/npm/v/pree.svg?label=&amp;style=flat-square"></a></template></npm-badge>
    <template shadowrootmode="open">
  <style>
    @media (max-width: 767px) {
      :host {
        display: none;
      }
    }
  </style>
  <slot></slot>
</template></large-device>
  </div>
</div><template shadowrootmode="open"><slot></slot></template></use-html>
      </turbo-frame>
    </footer>
    
    <script>
      const main = document.querySelector('main')
      addEventListener('turbo:before-frame-render', (event) => {
        main.style.filter = 'blur(3px)'
        main.style.opacity = .5
        main.style.transition = 'filter .1s, opacity .1s'
        event.preventDefault()
        setTimeout(() => {
          event.detail.resume()
          scrollTo(0, 0)
          main.style.transition = 'none'
          main.style.filter = 'none'
          main.style.opacity = 1
        }, 100)
      })
    </script>
  

</body></html>