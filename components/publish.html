<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="/pree/">

    
    <link rel="icon" type="image/png" sizes="32x32" href="favicon.ico">

    <link rel="stylesheet" href="https://unpkg.com/nokss">
    <link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="https://esm.sh/graphis/font/graphis.css">
    <link rel="stylesheet" href="./theme.css">
    
    <script src="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/highlight.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github-dark.min.css">

    
    
    

    <script src="./_components/emo-li.js" type="module"></script>
    <script type="module" src="./_components/prev-next.js"></script>
  <title>pree: publishing components</title>
          
        </head>
  <body><aside aria-hidden="true">
      <use-html src="./_toc.html"><style>
  #toc {
    a:not(:hover) {
      text-decoration-color: transparent;
    }

    hr {
      margin: 0;
    }
  }

</style>
<m-d id="toc" onparse="document.querySelector('prev-next').controls?.load()"><p><a href="index">Home</a> <br><a href="motivation">Motivation</a> <br><a href="install">Installation</a></p>
<hr>
<p><a href="usage/index"><strong>Usage</strong></a> <br>â€‚ <a href="usage/meta-layout">Metadata &amp; Layouts</a> <br>â€‚ <a href="usage/build-only-scripts">Build-Only Scripts</a> <br>â€‚ <a href="usage/config">Configuration</a></p>
<hr>
<p><a href="components/index"><strong>Using Components</strong></a> <br>â€‚ <a href="components/ssr">Server Side Rendering</a> <br>â€‚ <a href="components/build-env">Build Environment</a> <br>â€‚ <a href="components/publish">Publishing Components</a></p>
<template shadowrootmode="open"><slot></slot></template></m-d>
<template shadowrootmode="open"><slot></slot></template></use-html>
    </aside>
    <main>
      <m-d><h2 id="publishing-components">Publishing Components<menu role="toolbar"><button ref="?" aria-label="copy link" class="icon">ğŸ”—</button></menu></h2>
<p>You can easily share your components by publishing them through <a href="https://npmjs.com">NPM</a>, where they can get used via CDNs such as <a href="https://unpkg.com">unpkg</a> or <a href="https://esm.sh">esm.sh</a>. In this page we discuss a few good practices for publishing web components that integrate with <code>pree</code>. Checkout <a href="https://github.com/webcomponents/gold-standard/wiki">this checklist</a> and <a href="https://open-wc.org/guides/publishing/">these guides</a> some recommendations for publishing web components in general.</p>
<hr>
<h3 id="ssr-support">SSR Support<menu role="toolbar"><button ref="?" aria-label="copy link" class="icon">ğŸ”—</button></menu></h3>
<p>ğŸ‘‰ If your component is interactive, make sure it supports <a href="components/ssr">SSR</a>. This will make your website interactive faster on the client, as the pre-rendered DOM won't be recreated and is just hydrated. Use libraries such as <a href="https://github.com/loreanvictor/minicomp">minicomp</a> and <a href="https://github.com/loreanvictor/rehtm">rehtm</a> to make your components easily SSR-friendly.</p>
<pre><code class="language-js hljs language-javascript" data-highlighted="yes"><span class="hljs-keyword">import</span> { define } <span class="hljs-keyword">from</span> <span class="hljs-string">'https://esm.sh/minicomp'</span>
<span class="hljs-keyword">import</span> { ref, template } <span class="hljs-keyword">from</span> <span class="hljs-string">'https://esm.sh/rehtm'</span>

<span class="hljs-title function_">define</span>(<span class="hljs-string">'a-button'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> span = <span class="hljs-title function_">ref</span>()
  <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>
  
  <span class="hljs-keyword">return</span> template<span class="hljs-string">`
    &lt;button onclick=<span class="hljs-subst">${() =&gt; span.current.textContent = ++count}</span>&gt;
      Clicked &lt;span ref=<span class="hljs-subst">${span}</span> role="status"&gt;0&lt;/span&gt; times
    &lt;/button&gt;
  `</span>
})
</code><menu role="toolbar" align="right"><button ref="?" class="icon" aria-label="copy">ğŸ“‘</button></menu></pre>
<hr>
<h3 id="using-build-environment">Using Build Environment<menu role="toolbar"><button ref="?" aria-label="copy link" class="icon">ğŸ”—</button></menu></h3>
<p>ğŸ‘‰ If your component accesses <a href="components/build-env">build environment</a>, check for availability and version of the APIs
so that your component doesn't cause errors if used in other environments:</p>
<pre><code class="language-js hljs language-javascript" data-highlighted="yes"><span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">BUILD_ENV_API</span>) {
  <span class="hljs-comment">// use the APIs</span>
}
</code><menu role="toolbar" align="right"><button ref="?" class="icon" aria-label="copy">ğŸ“‘</button></menu></pre>
<br>

<p>ğŸ‘‰ Base URL for the APIs might change in some environments. Use <code>BUILD_ENV_API.baseURL</code> instead of <code>/@env/</code>:</p>
<pre><code class="language-js hljs language-javascript" data-highlighted="yes"><span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`<span class="hljs-subst">${BUILD_ENV_API.baseURL}</span>git/remote/info`</span>)
</code><menu role="toolbar" align="right"><button ref="?" class="icon" aria-label="copy">ğŸ“‘</button></menu></pre>
<br>

<p>It is recommended to also check the version of <code>pree</code> to ensure the APIs you need are provided. Use <code>BUILD_ENV_API.provider</code> to check that information:</p>
<pre><code class="language-js hljs language-javascript" data-highlighted="yes"><span class="hljs-variable language_">window</span>.<span class="hljs-property">BUILD_ENV_API</span>.<span class="hljs-property">provider</span>
<span class="hljs-comment">// pree@0.1.13</span>
</code><menu role="toolbar" align="right"><button ref="?" class="icon" aria-label="copy">ğŸ“‘</button></menu></pre>
<pre><code class="language-js hljs language-javascript" data-highlighted="yes"><span class="hljs-keyword">import</span> { satisfies } <span class="hljs-keyword">from</span> <span class="hljs-string">'https://esm.sh/semver'</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">buildEnvAccess</span> = supportedVersions =&gt; {
  <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">window</span>.<span class="hljs-property">BUILD_ENV_API</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>

  <span class="hljs-keyword">const</span> [host, version] = <span class="hljs-variable language_">window</span>.<span class="hljs-property">BUILD_ENV_API</span>.<span class="hljs-property">provider</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">'@'</span>)
  <span class="hljs-keyword">if</span> (host === <span class="hljs-string">'pree'</span> &amp;&amp; <span class="hljs-title function_">satisfies</span>(version, supportedVersions)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }
}

<span class="hljs-keyword">if</span> (<span class="hljs-title function_">buildEnvAccess</span>(<span class="hljs-string">'^0.1.10'</span>)) {
  <span class="hljs-comment">// use the APIs</span>
}
</code><menu role="toolbar" align="right"><button ref="?" class="icon" aria-label="copy">ğŸ“‘</button></menu></pre>
<br>

<blockquote>
<p>It is highly recommended to ensure that your components can function properly
even if access to build environment is not available. If not, users might get confused about when and where
they can use your components.</p>
</blockquote>
<template shadowrootmode="open"><slot></slot></template></m-d>

<br>
<change-history><template shadowrootmode="open"><style>a {
        display: block;
        text-align: right;
        opacity:.35;
        font-size: 0.8rem;
        font-style: italic;
        text-decoration: none;
        color: inherit;
      }</style><a ref="?" target="_blank" href="https://github.com/loreanvictor/pree/commit/f1bde2096973806bae13525ce558c1a08bac9adf">Updated at <span ref="?">Feb 07, 2024</span> <br>for <span ref="?">pree</span> version <span ref="?">0.1.13</span></a></template></change-history>
<br>
      <prev-next><template shadowrootmode="open"><link rel="stylesheet" href="https://unpkg.com/nokss"><link rel="stylesheet" href="https://unpkg.com/graphis/font/graphis.css"><style>i {
      font-family: 'graphis', sans-serif;
      font-style: normal;
      font-size: 2rem;
      opacity: .25;
    }

    section[role="feed"] {
      flex-direction: row;
      &[aria-hidden] {
        opacity: 0;
      }

      opacity: 1;
      transition: opacity .5s;

      article {
        flex-grow: 1;
        display: flex;
        flex-direction: row;
        align-items: center;
        gap: 1rem;

        & > a {
          display: block;
          flex-grow: 1;
          text-decoration: none!important;
        }

        &.next {
          flex-basis: flex-end;
          text-align: right;
        }

        @media (max-width: 480px) {
          &:first-child:not(:last-child) {
            display: none;
          }
        }
      }

      margin-bottom: 4rem;
    }</style><section role="feed" ref="?">        
        
          <article>
            <i>â¬…</i>
            <a href="http://localhost:3000/pree/components/build-env">
              <small>Previosly</small><br>
              Build Environment
            </a>
          </article>
          
        
      </section></template></prev-next>
    </main>
    <footer>
      <use-html src="./_footer.html"><script type="module" src="./_components/menu-toggle.js"></script>



<div style="display: flex">
  <menu-toggle><template shadowrootmode="open"><link rel="stylesheet" href="https://unpkg.com/nokss"><link rel="stylesheet" href="https://unpkg.com/graphis/font/graphis.css"><style>.icon {
      font-family: 'graphis', sans-serif;
      font-style: normal;
      font-size: 1.2rem;
    }

    button[role="switch"][aria-checked="true"]>span{
      color: var(--background-color);
    }</style><button ref="?" role="switch" aria-label="toggle sidebar" aria-checked="true"><span class="icon">âŒ</span><span class="icon">â©§</span></button></template></menu-toggle>
  <div style="flex-grow: 1"></div>
  <div align="right">
    <gh-link>github<template shadowrootmode="open"><link rel="stylesheet" href="https://unpkg.com/nokss/dist/bundles/md.css"><a ref="?" target="_blank" href="https://github.com/loreanvictor/pree"><slot>GitHub</slot></a></template></gh-link> | <npm-badge><template shadowrootmode="open"><link rel="stylesheet" href="https://unpkg.com/nokss/dist/bundles/md.css"><style>img {
        vertical-align: middle;
        margin-left: 0.5rem;
      }</style><a ref="?" target="_blank" href="https://www.npmjs.com/package/pree">pree</a><img alt="npm" ref="?" src="https://img.shields.io/npm/v/pree.svg?label=&amp;style=normal"></template></npm-badge>
  </div>
</div><template shadowrootmode="open"><slot></slot></template></use-html>
    </footer>
    
    <script type="module" src="copy.js"></script>
  

</body></html>