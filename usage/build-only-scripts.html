<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="/pree/">

    
    <link rel="icon" type="image/png" sizes="32x32" href="favicon.ico">

    <link rel="stylesheet" href="https://unpkg.com/nokss">
    <link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="https://esm.sh/graphis/font/graphis.css">
    <link rel="stylesheet" href="./theme.css">
    
    <script src="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/highlight.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github-dark.min.css">

    
    
    

    <script src="./components/emo-li.js" type="module"></script>
    <script type="module" src="./components/prev-next.js"></script>
  <title>pree: build-only scripts</title>
          
        </head>
  <body><aside aria-hidden="true">
      <use-html src="./_toc.html"><m-d id="toc" onparse="document.querySelector('prev-next').controls?.load()"><ul>
<li><a href="index">Home</a></li>
<li><a href="motivation">Motivation</a></li>
<li><a href="install">Installation</a></li>
<li><a href="usage/index">Usage</a><ul>
<li><a href="usage/meta-layout">Metadata &amp; Layouts</a></li>
<li><a href="usage/build-only-scripts">Build-Only Scripts</a></li>
</ul>
</li>
<li><a href="build-env">Build Environment</a></li>
</ul>
<template shadowrootmode="open"><slot></slot></template></m-d>
<template shadowrootmode="open"><slot></slot></template></use-html>
    </aside>
    <main>
      <m-d><h2 id="build-only-scripts">Build-Only Scripts<menu role="toolbar"><button ref="?" aria-label="copy link" class="icon">üîó</button></menu></h2>
<p>Many components are static: they don't need to be shipped to or executed on the client after they've been pre-rendered.
For example, you might want to write your pages using markdown. You could use components such as <a href="https://zerodevx.github.io/zero-md/">zero-md</a> to do that:</p>
<pre><code class="language-html hljs language-xml" data-highlighted="yes"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://esm.sh/zero-md"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">zero-md</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/markdown"</span>&gt;</span>
    # Hello, World!

    This is some markdown that I've written.
  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">zero-md</span>&gt;</span>
</code><menu role="toolbar" align="right"><button ref="?" class="icon" aria-label="copy">üìë</button></menu></pre>
<p>After <code>pree</code> pre-renders this HTML, there is no need to parse the markdown and re-render it on the client. Clients will unnecessarily download a whole markdown parser and parse all of this markdown.</p>
<br>

<p>üëâ Add <code>build-only</code> attribute to scripts that don't need to be loaded by the client:</p>
<pre><code class="language-html hljs language-xml" data-highlighted="yes"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">build-only</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://esm.sh/zero-md"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code><menu role="toolbar" align="right"><button ref="?" class="icon" aria-label="copy">üìë</button></menu></pre>
<p><code>pree</code> will remove any such script from the final HTML:</p>
<p>‚ÄÇ üß¨ ‚ÄÇ these scripts are also removed from inside web components, <br>‚ÄÇ ‚ö° ‚ÄÇ this will increase performance by reducing executed scripts, <br>‚ÄÇ üì¶ ‚ÄÇ this will reduce asset size that's downloaded.</p>
<br>

<blockquote>
<h4 id="Ô∏è-compatibility">‚ö†Ô∏è Compatibility<menu role="toolbar"><button ref="?" aria-label="copy link" class="icon">üîó</button></menu></h4>
<p>All of this relies on <a href="https://web.dev/declarative-shadow-dom/">declerative shadow DOM</a>, which <a href="https://caniuse.com/?search=declarative%20shadow%20dom">some browsers</a> might not support yet. Such browsers can't display the pre-rendered content of such components at all. If you need to support such browsers, ensure to include the code of all components and only use <code>build-only</code> on scripts that will modify the actual DOM during pre-rendering.</p>
</blockquote>
<br><template shadowrootmode="open"><slot></slot></template></m-d>

<change-history><template shadowrootmode="open"><style>a {
        display: block;
        text-align: right;
        opacity:.35;
        font-size: 0.8rem;
        font-style: italic;
        text-decoration: none;
        color: inherit;
      }</style><a ref="?" target="_blank" href="https://github.com/loreanvictor/pree/commit/0069d5ede3f090e9c885d2a7614b4aa5df641dbf">Updated at <span ref="?">Feb 04, 2024</span> <br>for <span ref="?">pree</span> version <span ref="?">0.1.9</span></a></template></change-history>

<br>
      <prev-next><template shadowrootmode="open"><link rel="stylesheet" href="https://unpkg.com/nokss"><link rel="stylesheet" href="https://unpkg.com/graphis/font/graphis.css"><style>i {
      font-family: 'graphis', sans-serif;
      font-style: normal;
      font-size: 2rem;
      opacity: .25;
    }

    section[role="feed"] {
      flex-direction: row;
      &[aria-hidden] {
        opacity: 0;
      }

      opacity: 1;
      transition: opacity .5s;

      article {
        flex-grow: 1;
        display: flex;
        flex-direction: row;
        align-items: center;
        gap: 1rem;

        & > a {
          display: block;
          flex-grow: 1;
          text-decoration: none!important;
        }

        &.next {
          flex-basis: flex-end;
          text-align: right;
        }

        @media (max-width: 480px) {
          &:first-child:not(:last-child) {
            display: none;
          }
        }
      }

      margin-bottom: 4rem;
    }</style><section role="feed" ref="?">        
        
          <article>
            <i>‚¨Ö</i>
            <a href="http://localhost:3000/pree/usage/meta-layout">
              <small>Previosly</small><br>
              Metadata &amp; Layouts
            </a>
          </article>
          
        
          <article class="next">
            <a href="http://localhost:3000/pree/build-env">
              <small>Up Next</small><br>
              Build Environment
            </a>
            <i>‚û°</i>
          </article>
          
      </section></template></prev-next>
    </main>
    <footer>
      <use-html src="./_footer.html"><script type="module" src="./components/menu-toggle.js"></script>



<div style="display: flex">
  <menu-toggle><template shadowrootmode="open"><link rel="stylesheet" href="https://unpkg.com/nokss"><link rel="stylesheet" href="https://unpkg.com/graphis/font/graphis.css"><style>.icon {
      font-family: 'graphis', sans-serif;
      font-style: normal;
      font-size: 1.2rem;
    }

    button[role="switch"][aria-checked="true"]>span{
      color: var(--background-color);
    }</style><button ref="?" role="switch" aria-label="toggle sidebar" aria-checked="true"><span class="icon">‚ùå</span><span class="icon">‚©ß</span></button></template></menu-toggle>
  <div style="flex-grow: 1"></div>
  <div align="right">
    <gh-link>github<template shadowrootmode="open"><link rel="stylesheet" href="https://unpkg.com/nokss/dist/bundles/md.css"><a ref="?" target="_blank" href="https://github.com/loreanvictor/pree"><slot>GitHub</slot></a></template></gh-link> | <npm-badge><template shadowrootmode="open"><link rel="stylesheet" href="https://unpkg.com/nokss/dist/bundles/md.css"><style>img {
        vertical-align: middle;
        margin-left: 0.5rem;
      }</style><a ref="?" target="_blank" href="https://www.npmjs.com/package/pree">pree</a><img alt="npm" ref="?" src="https://img.shields.io/npm/v/pree.svg?label=&amp;style=normal"></template></npm-badge>
  </div>
</div><template shadowrootmode="open"><slot></slot></template></use-html>
    </footer>
    
    <script type="module" src="copy.js"></script>
  

</body></html>